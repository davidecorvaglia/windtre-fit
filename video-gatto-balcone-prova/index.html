<!doctype html>
<html lang="it">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>CCTV Monitor</title>

  <style>
    /* =========================
       RESET + LAYOUT
    ========================= */
    html, body {
      margin: 0;
      height: 100%;
      background: #000;
      overflow: hidden;
      font-family: monospace;
    }

    body {
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .stage {
      position: relative;
      width: 100vw;
      height: 100vh;
      background: #000;
    }

    video {
      width: 100%;
      height: 100%;
      object-fit: contain;
      background: #000;
      display: block;
      filter: contrast(1.15) brightness(0.9) saturate(0.7);
    }

    /* =========================
       EFFETTI CCTV
    ========================= */

    /* Scanlines */
    .scanlines {
      pointer-events: none;
      position: absolute;
      inset: 0;
      background: repeating-linear-gradient(
        to bottom,
        rgba(255,255,255,0.03),
        rgba(255,255,255,0.03) 1px,
        rgba(0,0,0,0.05) 2px,
        rgba(0,0,0,0.05) 4px
      );
      mix-blend-mode: overlay;
    }

    /* Rumore */
    .noise {
      pointer-events: none;
      position: absolute;
      inset: 0;
      background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='120' height='120'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.8' numOctaves='4'/ %3E%3C/filter%3E%3Crect width='120' height='120' filter='url(%23n)' opacity='0.15'/%3E%3C/svg%3E");
      animation: noiseMove 0.3s steps(2) infinite;
    }

    @keyframes noiseMove {
      0% { transform: translate(0,0); }
      25% { transform: translate(-2%,2%); }
      50% { transform: translate(2%,-2%); }
      75% { transform: translate(-1%,1%); }
      100% { transform: translate(0,0); }
    }

    /* Vignettatura */
    .vignette {
      pointer-events: none;
      position: absolute;
      inset: 0;
      background: radial-gradient(
        ellipse at center,
        rgba(0,0,0,0) 55%,
        rgba(0,0,0,0.55) 100%
      );
    }

    /* Flicker leggero */
    .flicker {
      animation: flicker 6s infinite;
    }

    @keyframes flicker {
      0%, 97%, 100% { opacity: 1; }
      98% { opacity: 0.95; }
      99% { opacity: 0.85; }
    }

    /* Testo overlay tipo CCTV */
    .overlay {
      position: absolute;
      color: #00ff66;
      font-size: 14px;
      opacity: 0.85;
      text-shadow: 0 0 4px rgba(0,255,100,0.6);
    }

    .top-left {
      top: 12px;
      left: 12px;
    }

    .bottom-left {
      bottom: 12px;
      left: 12px;
    }
  </style>
</head>

<body>
  <div class="stage flicker">
    <video
      id="cctv"
      autoplay
      muted
      playsinline
      preload="auto"
    >
      <source src="video.mp4" type="video/mp4">
      Il tuo browser non supporta il video HTML5.
    </video>

    <!-- Overlay CCTV -->
    <div class="overlay top-left">
      CAM 03<br>
      REC ‚óè
    </div>

    <div class="overlay bottom-left" id="timestamp">
      --:--:--
    </div>

    <!-- Effetti -->
    <div class="scanlines"></div>
    <div class="noise"></div>
    <div class="vignette"></div>
  </div>

  <script>
    const video = document.getElementById("cctv");

    /* =========================
       LOOP CON RIAVVIO PULITO
    ========================= */
    video.addEventListener("ended", () => {
      video.pause();
      video.currentTime = 0;
      video.play();
    });

    /* =========================
       TIMESTAMP CCTV
    ========================= */
    const ts = document.getElementById("timestamp");

    function updateTime() {
      const now = new Date();
      const time = now.toLocaleTimeString("it-IT");
      ts.textContent = time;
    }

    updateTime();
    setInterval(updateTime, 1000);
  </script>
</body>
</html>
